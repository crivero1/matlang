%!TEX root = /Users/fgeerts/Documents/MLforloops/pods/main.tex
\newtheorem*{Undec}{Proposition~\ref{prop-undec}}
Let $e$ be a \langfor expression over a matrix schema $\mathcal{S}=(\mathcal{M},\textsf{size})$ and let $V_1,\ldots, V_k$ be
the variables of $e$, each of type $(\alpha,\alpha)$, $(1,\alpha)$, $(\alpha,1)$ or $(1,1)$. We know from Theorem~\ref{th-ml-to-circuits}
that there exists a uniform arithmetic circuit family $\{\Phi_n \mid n=1,2,\ldots\}$
such that $\sem{e}(\I)=\Phi_n(A_1,\ldots,A_k)$ for any instance $\I$ such that
$\mathcal{D}(\alpha)=n$ and $\conc(V_i)=A_i$ for $i=1,\ldots,k$. We are interested in deciding
whether there exists such a  uniform arithmetic circuit family $\{\Phi_n \mid n=1,2,\ldots\}$
of polynomial degree, i.e., such that $\mathsf{degree}(\Phi_n)=\mathcal{O}(p(n))$ for some polynomial $p(x)$. If such a circuit family exists, we call $e$ of polynomial degree.

{\bf IN PROGRESS}

\begin{Undec}
	Given a \langfor expression $e$ over a schema $\Sch$, it is undecidable to check whether $e$ is of polynomial degree.
\end{Undec}
\begin{proof}
We show undecidability based on the following undecidable problem:
$$
\{ \langle M\rangle\mid \text{$M$ is a deterministic TM which halts on the empty input}\}
$$
Consider a TM $M$ described by $(Q,\Gamma=\{0,1\},q_0,q_m,\Delta)$
with $Q=\{q_1,\ldots,q_m\}$ its states, $q_1$ being the initial state and $q_m$ being
the halting state, $\Gamma$ is the tape alphabet, and $\Delta$ is a transition function
from $Q\times \Gamma\to Q\times\Gamma\times \{\leftarrow,\sqcup,\rightarrow\}$. The simulation
of linear space TM, as given in the proof of Proposition~\ref{prop:transducer} can be easily modified to
any TM $M$ provided that we limit the execution of $M$ to exactly $n$ steps. Let $e_M$ denote this expression. Similarly
as in the linear space TM simulation, we have relation $Q_1,\ldots,Q_m$ encoding the
states, a single relation $T$ encoding the tape and relation $H_T$ encoding the position
of the tape. We note that we do not have any input and our tape has length $n$ when the matrix variables are assigned $n$ as size. By contrast to the linear space 
simulation, we also use a single vector $v$ (instead of $k$ such vectors) 
to simulate $n$ steps of $M$. We modify the expression such that it returns $1$ if $M$
halts in at most $n$ steps, and $0$ if $M$ did not halt yet after $n$ steps.

As a consequence, when $M$ does not halt, $e_M$ will always return $0$
for any $n$. When $M$ halts, there will be an $n$ such that $e_M$ returns $1$.
It now suffices to consider the matlang expression
$$
d_M:=e_M\cdot e_{\mathsf{exp}}
$$
where $e_{\mathsf{exp}}$ computes the functions $x^{2^n}$. 
\floris{this expression needs to be detailed....}
Then, when $M$ does not halt we can clearly compute $d_M$ with a constant circuit ``0''
for any $n$, otherwise, the circuit needed will be of exponential degree
for at least one $n$. 
\floris{Is the latter clear?}
\end{proof}


%
% 3/ Based on e_M(n) we now consider the ML expression
%
%  d_M(n):=e_M(n) Pow(n)
%
% with Pow(n)=2^n (or any other ML expression which cannot
% be computed by a poly degree circuit). Then, d_M(n) will be of
% poly degree if M does not halt in n steps. And since we
% want to know whether it is poly degree for all n (uniform circuits)
% M should not halt. Hence, the poly degree problem cannot be decidable.
